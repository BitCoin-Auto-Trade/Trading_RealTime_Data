ㅎ# 비트코인 선물 자동매매 시스템

## 프로젝트 개요

실시간 거래량과 호가 데이터를 분석하여 비트코인 선물 자동 매매를 수행하는 시스템

### 핵심 전략

거래량과 호가에 모든 정보가 담겨 있다
- 시장 참여자들의 실제 행동(체결)과 의도(호가창)를 실시간 분석
- 기술적 지표, 이벤트, 고래 움직임은 결국 거래량과 호가에 반영됨

---

## 매매 전략

### 진입 조건 (3가지 모두 충족 시)

1. 거래량 폭발: 최근 N개 봉 평균 대비 X배 이상
2. 호가 불균형: 한쪽 방향으로 물량 압도적 쏠림
3. 가격 모멘텀: 순간적인 급등/급락

### 청산 조건 (1가지라도 충족 시)

1. 거래량 감소: 추세 약화
2. 호가 반전: 반대 방향 쏠림
3. 손절: 진입가 대비 5% 손실

---

## 리스크 관리

- 초기 자본: 10만원
- 레버리지: 10배
- 포지션 크기: 100만원
- 손절선: 5%
- 수수료: 0.05% (시장가)

---

## 시스템 구조
```
바이낸스 WebSocket → 인메모리 처리 → 시그널 생성 → 주문 실행
↓
비동기 로깅 (선택)
```

### 핵심 설계

- Kafka 제거 (레이턴시 최적화)
- 단일 프로세스 + asyncio
- 인메모리 상태 관리
- 목표 지연시간: 100ms 이하

---

## 기술 스택

- Python 3.x + asyncio
- 바이낸스 WebSocket API (시장 데이터)
- 바이낸스 Futures REST API (주문 실행)
- Docker Compose (배포)

---

## 폴더 구조
```
Trading_RealTime_Data/
├── config/
│   └── settings.py              # 설정 및 임계값
├── core/
│   ├── data_pipeline.py         # 통합 데이터 파이프라인 ✨ NEW
│   ├── market_state_manager.py  # 시장 상태 관리 ✨ NEW
│   ├── signal_engine_v1.py      # 시그널 생성
│   └── order_executor.py        # 주문 실행
├── data_collector/
│   ├── websocket_connector.py   # WebSocket 연결 (V1)
│   ├── websocket_connector_v2.py # 개선된 WebSocket ✨ NEW
│   ├── data_parser.py           # 데이터 파싱
│   ├── data_validator.py        # 데이터 검증 ✨ NEW
│   └── data_normalizer.py       # 데이터 정규화 ✨ NEW
├── storage/
│   └── hot_storage.py           # 고속 인메모리 저장소 ✨ NEW
├── models/
│   ├── market_state.py          # 시장 상태 모델
│   ├── order_book.py            # 호가창 모델
│   └── trade.py                 # 체결 모델
├── utils/
│   └── logger_utils.py          # 로깅
├── main.py                      # 실행 파일 (V1)
├── main_v2.py                   # 새로운 아키텍처 ✨ NEW
├── ARCHITECTURE.md              # 아키텍처 문서 ✨ NEW
└── QUICKSTART.md                # 빠른 시작 가이드 ✨ NEW
```

## 새로운 아키텍처 (V2)

### 핵심 개선 사항

1. **데이터 검증 레이어** - 잘못된 데이터 필터링
2. **데이터 정규화** - 일관된 데이터 포맷 및 추가 지표 계산
3. **시장 상태 관리** - 실시간 시장 상태 추적 및 특징 계산
4. **고속 저장소** - 시간 인덱싱 기반 빠른 조회
5. **Auto Reconnection** - Exponential Backoff 재연결
6. **구조화된 모니터링** - 체계적인 통계 및 메트릭

### 실행 방법

```bash
# 의존성 설치
pip install -r requirements.txt

# 새로운 아키텍처로 실행 (권장)
python main_v2.py

# 기존 버전 실행
python main.py
```

상세한 사용법은 [QUICKSTART.md](QUICKSTART.md)를 참고하세요.
전체 아키텍처 설계는 [ARCHITECTURE.md](ARCHITECTURE.md)를 참고하세요.

---

## 개발 단계

### 1단계: 로컬 개발 (현재)

- WebSocket 구현
- 시그널 로직 개발
- 백테스팅
- 페이퍼 트레이딩

### 2단계: 실전 테스트

- 실계좌 연동 (10만원)
- 주문 실행 모듈
- 로깅 및 모니터링
- 텔레그램 알림

### 3단계: 운영

- 클라우드 배포
- 24시간 운영
- 대시보드 구축
- 성과 분석
- 자본 확대

---

## 목표 지표

### 1개월

- 시스템 안정성: 24시간 무중단
- 주문 체결률: 95% 이상
- 목표: 안정성 확보

### 3개월

- 승률: 50% 이상
- 수익률: +30% 이상
- 최대 낙폭: -30% 이내

### 6개월

- 월 수익률: +10% 이상
- 자본 확대 검토
- 추가 페어 확장

---

## 주요 리스크

### 기술적

- 가짜 브레이크아웃으로 인한 손절 빈발
- API 제한으로 주문 실패
- 네트워크 지연으로 타이밍 손실

### 재무적

- 거래 빈도 높을 시 수수료 누적
- 연속 손절 시 계좌 소진 (2-3회)
- 레버리지로 인한 손실 확대

---

최종 업데이트: 2025-10-04